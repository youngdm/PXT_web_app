<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Data Preview - PXT Web App</title>
    <style>
      /* Consistent styling with upload.html */
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.6;
        margin: 0;
        padding: 0;
        background-color: #f5f5f5;
        color: #333;
      }

      .container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 20px;
        background-color: white;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        margin-top: 20px;
        border-radius: 8px;
      }

      .header {
        text-align: center;
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 2px solid #2c5530;
      }

      .header h1 {
        color: #2c5530;
        margin: 0;
        font-size: 2.2em;
      }

      .header .subtitle {
        color: #666;
        font-size: 1.1em;
        margin-top: 5px;
      }

      .file-info {
        background-color: #e8f4ea;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
        border-left: 4px solid #2c5530;
      }

      .file-info h2 {
        color: #2c5530;
        margin-top: 0;
      }

      .info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin: 15px 0;
      }

      .info-item {
        background-color: white;
        padding: 15px;
        border-radius: 4px;
        text-align: center;
        border: 1px solid #ddd;
      }

      .info-item .number {
        font-size: 1.8em;
        font-weight: bold;
        color: #2c5530;
      }

      .info-item .filename {
        font-size: 1.1em;
        font-weight: 600;
        color: #2c5530;
        word-break: break-all;
        margin-bottom: 5px;
      }

      .info-item .label {
        color: #666;
        font-size: 0.9em;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .columns-section {
        margin: 30px 0;
      }

      .columns-section h3 {
        color: #2c5530;
        border-bottom: 2px solid #e8f4ea;
        padding-bottom: 5px;
      }

      .columns-list {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 10px;
        margin: 15px 0;
      }

      .column-tag {
        background-color: #f8f9fa;
        padding: 8px 12px;
        border-radius: 4px;
        border: 1px solid #dee2e6;
        font-family: monospace;
        font-size: 0.9em;
      }

      .preview-section {
        margin: 30px 0;
      }

      .preview-section h3 {
        color: #2c5530;
        border-bottom: 2px solid #e8f4ea;
        padding-bottom: 5px;
      }

      .data-table {
        width: 100%;
        border-collapse: collapse;
        margin: 15px 0;
        background-color: white;
        border: 1px solid #ddd;
      }

      .data-table th {
        background-color: #2c5530;
        color: white;
        padding: 12px 8px;
        text-align: left;
        font-weight: 600;
      }

      .data-table td {
        padding: 10px 8px;
        border-bottom: 1px solid #eee;
        max-width: 150px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      .data-table tr:nth-child(even) {
        background-color: #f8f9fa;
      }

      .actions {
        text-align: center;
        margin: 40px 0;
      }

      .btn {
        display: inline-block;
        padding: 12px 24px;
        margin: 0 10px;
        border: none;
        border-radius: 4px;
        font-size: 1.1em;
        text-decoration: none;
        cursor: pointer;
        transition: background-color 0.3s;
      }

      .btn-primary {
        background-color: #2c5530;
        color: white;
      }

      .btn-primary:hover {
        background-color: #1a3320;
      }

      .btn-secondary {
        background-color: #6c757d;
        color: white;
      }

      .btn-secondary:hover {
        background-color: #545b62;
      }

      .flash-messages {
        margin: 20px 0;
      }

      .flash-message {
        padding: 12px 16px;
        border-radius: 4px;
        margin: 10px 0;
      }

      .flash-message.success {
        background-color: #d4edda;
        border: 1px solid #c3e6cb;
        color: #155724;
      }

      .flash-message.error {
        background-color: #f8d7da;
        border: 1px solid #f5c6cb;
        color: #721c24;
      }

      .note {
        background-color: #fff3cd;
        border: 1px solid #ffeaa7;
        padding: 15px;
        border-radius: 4px;
        margin: 20px 0;
        color: #856404;
      }

      .footer {
        text-align: center;
        margin-top: 40px;
        padding-top: 20px;
        border-top: 1px solid #eee;
        color: #666;
        font-size: 0.9em;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <div class="header">
        <h1>Data Preview</h1>
        <div class="subtitle">
          Review your uploaded data before applying PXT tags
        </div>
      </div>

      <!-- Flash Messages -->
      <div class="flash-messages">
        {% with messages = get_flashed_messages(with_categories=true) %} {% if
        messages %} {% for category, message in messages %}
        <div class="flash-message {{ category }}">{{ message }}</div>
        {% endfor %} {% endif %} {% endwith %}
      </div>

      <!-- File Information -->
      <div class="file-info">
        <h2>üìä File Information</h2>
        <div class="info-grid">
          <div class="info-item">
            <div class="filename">{{ data.filename }}</div>
            <div class="label">Filename</div>
          </div>
          <div class="info-item">
            <div class="number">{{ data.row_count }}</div>
            <div class="label">Rows</div>
          </div>
          <div class="info-item">
            <div class="number">{{ data.column_count }}</div>
            <div class="label">Columns</div>
          </div>
        </div>
      </div>

      <!-- Columns Section -->
      <div class="columns-section">
        <h3>üìã Column Names</h3>
        <p>These are the column headers found in your CSV file:</p>
        <div class="columns-list">
          {% for column in data.columns %}
          <div class="column-tag">{{ column }}</div>
          {% endfor %}
        </div>
      </div>

      <!-- Data Preview Section -->
      {% if data.sample_data %}
      <div class="preview-section">
        <h3>üëÅÔ∏è Data Preview (First 3 Rows)</h3>
        <div style="overflow-x: auto">
          <table class="data-table">
            <thead>
              <tr>
                {% for column in data.columns %}
                <th>{{ column }}</th>
                {% endfor %}
              </tr>
            </thead>
            <tbody>
              {% for row in data.sample_data %}
              <tr>
                {% for column in data.columns %}
                <td
                  title="{{ row[column] if row[column] is not none else '' }}"
                >
                  {{ row[column] if row[column] is not none else '' }}
                </td>
                {% endfor %}
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
      {% endif %}

      <!-- Note about next steps -->
      <div class="note">
        <strong>Next Steps:</strong> In the complete application, you would
        proceed to apply PXT tags to your columns. For this workshop
        demonstration, you can see how your data has been successfully processed
        and would be ready for tagging.
      </div>

      <!-- Action Buttons -->
      <div class="actions">
        <a href="{{ url_for('index') }}" class="btn btn-secondary">
          ‚Üê Upload Different File
        </a>
        <button class="btn btn-primary" onclick="showComingSoon()">
          Apply PXT Tags ‚Üí
        </button>
      </div>

      <!-- Footer -->
      <div class="footer">
        <p>PXT Web App - Workshop Demonstration Version</p>
        <p>Data preview complete | No data is stored permanently</p>
      </div>
    </div>

    <script>
      function showComingSoon() {
        alert(
          "PXT Tag Application Interface - Coming in Week 2 of development!\n\nThis demo shows successful data upload and preview. The tagging interface will be built next.",
        );
      }

      // Add some visual feedback for long column names
      document.querySelectorAll(".data-table td").forEach(function (cell) {
        if (cell.scrollWidth > cell.clientWidth) {
          cell.style.cursor = "help";
        }
      });
    </script>
  </body>
</html>
